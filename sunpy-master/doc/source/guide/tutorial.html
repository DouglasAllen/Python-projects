<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.10: http://docutils.sourceforge.net/" />
<title>A brief tour of SunPy</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7514 2012-09-14 14:27:12Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="a-brief-tour-of-sunpy">
<h1 class="title">A brief tour of SunPy</h1>

<p>Welcome to the SunPy tutorial! This brief tutorial will walk you through some
of the functionality currently offered by SunPy. Start by reading this tutorial
and trying out some of the examples demonstrated. Once you've completed the
tutorial check out the <a href="#id1"><span class="problematic" id="id2">:doc:`code reference&lt;/reference/index&gt;`</span></a> for a more
thorough look at the functionality available.</p>
<div class="system-message" id="id1">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">tutorial.rst</tt>, line 5); <em><a href="#id2">backlink</a></em></p>
Unknown interpreted text role &quot;doc&quot;.</div>
<div class="section" id="maps">
<h1>1. Maps</h1>
<p>Maps are the primary data type in SunPy they are spatially and / or temporally aware
data arrays. There are types of maps for a 2D image, a time series of 2D images or
1D spectra or 2D spectrograms. Making a map of your data is the normally the first
step in using SunPy to work with your data.</p>
<p><strong>Creating a Map</strong></p>
<p>SunPy supports many different data products from various sources 'out of the box' we
shall use SDO's AIA instrument as an example in this tutorial. The general way to create
a map from one of the supported data products is with the <cite>sunpy.make_map()</cite> command.</p>
<p><cite>sunpy.make_map()</cite> takes either a filename, list of filenames data array and header. We can test map with:</p>
<pre class="literal-block">
import sunpy
aia = sunpy.make_map(sunpy.AIA_171_IMAGE)
</pre>
<p>This returns a map named aia which can be maniputated with standard SunPy map commands.
For more information about maps checkout the <a href="#id3"><span class="problematic" id="id4">:doc:`map guide &lt;maps&gt;`</span></a>.</p>
<div class="system-message" id="id3">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">tutorial.rst</tt>, line 30); <em><a href="#id4">backlink</a></em></p>
Unknown interpreted text role &quot;doc&quot;.</div>
</div>
<div class="section" id="plotting">
<h1>2. Plotting</h1>
<p>Let's begin by creating a simple plot of an AIA image. To make things easy,
SunPy includes several example files which are used throughout the docs. These
files have names like <cite>sunpy.AIA_171_IMAGE</cite> and <cite>sunpy.RHESSI_IMAGE</cite>.</p>
<p>Try typing the below example into your interactive Python shell:</p>
<pre class="literal-block">
import sunpy
aia = sunpy.make_map(sunpy.AIA_171_IMAGE)
aia.peek()
</pre>
<p>If everything has been configured properly you should see an AIA image with
a red colormap, a colorbar on the right-hand side and a title and some
labels.</p>
<img alt="../images/plotting_ex1.png" src="../images/plotting_ex1.png" />
<p>There is lot going on here, but we will walk you through the example. Briefly,
the first line is just importing SunPy. On the second line we create a
SunPy Map object which is basically just a spatially-aware image or data array.
On the last line we then plot the map object, using the built in 'quick plot' function <cite>peek()</cite>.</p>
<p>SunPy uses a matplotlib like interface to it's plotting so more complex plots can be built by combining
SunPy with matplotlib:</p>
<pre class="literal-block">
import sunpy
import matplotlib.pyplot as plt

aia = sunpy.make_map(sunpy.AIA_171_IMAGE)

fig = plt.figure()
ax = plt.subplot(111)

aia.plot()
plt.colorbar()
aia.draw_limb()

plt.show()
</pre>
<p>This should output something like the image below:</p>
<img alt="../images/plotting_ex3.png" src="../images/plotting_ex3.png" />
</div>
<div class="section" id="solar-physical-constants">
<h1>3. Solar Physical Constants</h1>
<p>SunPy contains a convienient list of solar-related physical constants. Here is
a short bit of code to get you started:</p>
<pre class="literal-block">
from sunpy.sun import constants as con

# one astronomical unit (the average distance between the Sun and Earth)
print(con.au)

# the solar radius
print(con.radius)
</pre>
<p>Not all constants have a shortcut assigned to them (as above). The rest of the constants
are stored in a dictionary. The following code grabs the dictionary and gets all of the
keys.:</p>
<pre class="literal-block">
solar_constants = con.physical_constants
solar_constants.keys()
</pre>
<p>You can also use the following function to print out a table of all of the values
available.</p>
<pre class="literal-block">
con.print_all()
</pre>
<p>These constants are provided as a convenience so that everyone is using the same
(accepted values). More will be added over time.</p>
</div>
<div class="section" id="working-with-times">
<h1>4. Working with Times</h1>
<p>SunPy also contains a number of convenience functions for working with dates
and times. Here is a short example:</p>
<pre class="literal-block">
from sunpy.time import *

# parsing a standard time strings
parse_time('2004/02/05 12:00')

# This returns a datetime object. All SunPy functions which require
# time as an input sanitize the input using parse_time.
day_of_year('2004-Jul-05 12:00:02')

# the julian day
julian_day((2010,4,30))

# TimeRange objects are useful for representing ranges of time
time_range = TimeRange('2010/03/04 00:10', '2010/03/04 00:20')
time_range.center()
</pre>
<p>For more information about working with time in SunPy checkout the <a href="#id5"><span class="problematic" id="id6">:doc:`time guide &lt;time&gt;`</span></a>.</p>
<div class="system-message" id="id5">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">tutorial.rst</tt>, line 129); <em><a href="#id6">backlink</a></em></p>
Unknown interpreted text role &quot;doc&quot;.</div>
</div>
<div class="section" id="querying-the-vso">
<h1>5. Querying the VSO</h1>
<p>There are a couple different ways to query and download data from the VSO using
SunPy. The method you should use depends first on your preference with respect
to query style: the main method of querying uses a syntax that is unique to
SunPy and may require some getting used to, but is extremely flexible and
powerful. To make it easy for people coming from SSW to get started, a second
&quot;legacy&quot; API also exists which works is very much the same way as VSO_GET in
IDL.</p>
<p>Further, for each of the two query APIs there are interactive and
non-interactive versions available, depending on the type of work you are doing.</p>
<p>The below example demonstrates a simple query for SOHO EIT data using the
non-interactive version of the main API:</p>
<pre class="literal-block">
from sunpy.net import vso

# create a new VSOClient instance
client = vso.VSOClient()

# build our query
result = client.query(
    vso.attrs.Time((2011, 9, 20, 1), (2011, 9, 20, 2)),
    vso.attrs.Instrument('eit')
)

# print the number of matches
print(&quot;Number of records found: %d &quot; % result.num_records())

# download matches to /download/path
res = client.get(result, path=&quot;/download/path/{file}&quot;).wait()
</pre>
<p>Note that specifying a path is optional and if you do not specify one the files
will simply be downloaded into a temporary directory (e.g. /tmp/xyz).
For more information about vso client checkout the <a href="#id7"><span class="problematic" id="id8">:doc:`vso guide &lt;vso&gt;`</span></a>.</p>
<div class="system-message" id="id7">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">tutorial.rst</tt>, line 164); <em><a href="#id8">backlink</a></em></p>
Unknown interpreted text role &quot;doc&quot;.</div>
</div>
<div class="section" id="querying-helioviewer-org">
<h1>6. Querying Helioviewer.org</h1>
<p>SunPy can be used to make several basic requests using the The <a class="reference external" href="http://helioviewer.org/api/">Helioviewer.org API</a>
including generating a PNG and downloading a <a class="reference external" href="http://wiki.helioviewer.org/wiki/JPEG_2000">JPEG 2000</a>
image and loading it into a SunPy Map.</p>
<p>A simple example of a helioviewer quiery is:</p>
<pre class="literal-block">
from sunpy.net.helioviewer import HelioviewerClient

hv = HelioviewerClient()
hv.download_png('2099/01/01', 4.8, &quot;[SDO,AIA,AIA,304,1,100]&quot;, x0=0, y0=0, width=512, height=512)
</pre>
<p>This downloads a PNG image of the latest AIA 304 image available on
Helioviewer.org in the <cite>download_png</cite> command 4.8 refers to the image resolution
in arcseconds per pixel (larger values mean lower resolution), the &quot;1&quot; and &quot;100&quot; in the
layer string refer to the visibility (visible/hidden) and opacity,
x0 and y0 are the center points about which to focus and the width and height
are the pixel values for the image dimensions.</p>
<p>The result is:</p>
<img alt="../images/helioviewer_download_png_ex1.png" src="../images/helioviewer_download_png_ex1.png" />
<p>For more information checkout the <a href="#id9"><span class="problematic" id="id10">:doc:`helioviewer guide &lt;helioviewer&gt;`</span></a>.</p>
<div class="system-message" id="id9">
<p class="system-message-title">System Message: ERROR/3 (<tt class="docutils">tutorial.rst</tt>, line 195); <em><a href="#id10">backlink</a></em></p>
Unknown interpreted text role &quot;doc&quot;.</div>
</div>
</div>
</body>
</html>
